<HTML>
<HEAD>
<TITLE>抽籤系統</TITLE>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"/>
<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">
<link rel="stylesheet" 
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"/>
<script type=”text/javascript”>
	$(function () {
	$("#input_20160628 button.draw").click(function () {
    	var _lines = $.trim($("#input_20160628 textarea").val()).split("\n");
    	var _repeatable = ($('#input_20160628 [name="repeatable"]').length === 1);
    	var _number = parseInt($('#input_20160628 [name="number"]').val());
    	var _result = $("#result_20160628").empty();
    	if (isNaN(_number)) {
    	//alert("抽出數量必須為數字");
        _result.html("抽出數量必須為數字");
        return;
    	}
    	if (_lines.length === 1 && _lines[0] === "") {
        //alert("抽出數量必須為數字");
        _result.html("必須輸入資料");
        return;
   	}

    	var _list = [];
    	for (var _i = 0; _i < _lines.length; _i++) {
        var _line = $.trim(_lines[_i]);
        if (_repeatable === true) {
            _list.push(_line);
        }
        else if ($.inArray(_line, _list) === -1) {
            _list.push(_line);
        }
    }
    
    if (_number > _list.length) {
      _number = _list.length;
    }

    // 抽出n位
    var _getRandomInt = function(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    var _result_index = [];
    _result.append('<div>抽籤結果(共'+_number+'位)：</div>');
    for (var _r = 0; _r < _number; _r++) {
        var _random_int = _getRandomInt(0, _list.length-1);
        if ($.inArray(_random_int, _result_index) === -1) {
            _result_index.push(_random_int);
            _result.append('<div>' + _list[_random_int] + '</div>');
        }
        else {
            _r--;
        }
    }
  });
  
  $("#input_20160628 button.default").click(function () {
    $("#input_20160628 textarea").val('店家1\n林家豪\n袁怡孜\n張文星\n劉吉蕙\n賴又玲\n陳冠琪\n陳映惠\n黃倍宣\n李禎東\n謝任枝\n魏筱婷\n張玉男\n倪俊賢\n林浩辛\n鄭茂慈\n謝婷婷\n劉憲胤\n許智亨\n陳雅雯\n李姿郁\n黃涵伶\n褚勝傑\n荀曼成\n林智凱\n蔡綠君\n蔡嘉芳\n吳琇杰\n張哲嘉\n侯亞珊\n吳侑勳\n錢佐韻\n蕭懿宏\n謝宜婷\n楊怡萱\n吳初齊\n彭佩穎\n程博鈞\n應思婷\n錢淳州\n張雨齊\n張秀龍\n王欣怡\n劉君芳\n林聖辰\n林俊穎\n江裕仁\n蔡偉哲\n張俊豪\n胡天良\n戴子婷\n朱淑媛\n梅智翔\n魏俊杰\n王柔瑤\n吳佳純\n謝玉梅\n陳佳俊\n黃建吉\n陳逸書\n姚佑花\n許瑩昇\n陳美喜\n陳瑜辛\n王靜芳\n黃玉凡\n朱明輝\n唐元木\n倪駿銘\n陳方順\n王皓中\n黃俊真\n劉宗達\n黃偉平\n吳阿人\n黃雅麟\n崔威廷\n盧兆珊\n陳邦峰\n黃珮坤\n王威任\n李又瑋\n劉宣秀\n芮淑娟\n滑劭燦\n葉佳欣\n鐘哲榮\n陳柏成\n張家豪\n林信宏\n林堯木\n翁君豪\n賁軒為\n黃士陽\n林京林\n郭呈愛\n張艾財\n張靜宜\n葉郁翔');
  });
});
</script>
	
</HEAD>	
	
<style>
	#input_20160628 {
  	float:left;
 	width: 30%;
 	margin-right: 2em;
	}
	#input_20160628 label {
  	display: block;
  	margin-top: 0.5em;
	}
	#input_20160628 div {
  	margin-top: 0.5em;
  	text-align: center;
	}
	#input_20160628 textarea {
  	width: 100%;
  	height: 20em;
	} 
		
	
</style>
	

	
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	
	
<BODY>

<div id="input_20160628">
	<label>抽出數量: <input type="number" name="number" value="10" /></label>
 	<label><input type="checkbox" name="repeatable" /> 允許重複資料 </label>
 	<div><textarea></textarea></div>
  		<div class="div-button">
    			<button type="button" class="default">插入預設資料</button>
    			<button type="button" class="draw">抽籤</button>
  		</div>
	</div>
	<div id="result_20160628"></div>
	<div style="clear:both"></div>
	
</BODY>

</HTML>

	








	

